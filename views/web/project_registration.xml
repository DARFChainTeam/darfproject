<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="mystyle" name="My style" inherit_id="website.assets_frontend">
    <xpath expr="link[last()]" position="after">
        <link href="/darfproject/static/src/css/main.css" rel="stylesheet" type="text/less"/>
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
       <style>
       body {
    padding-top: 50px;
    padding-bottom: 50px;
}

.o_portal {
    display:none;
    }
.o_portal_my_details {
    display:none;
    }
.price-box {
    margin: 0 auto;
	background: #E9E9E9;
	border-radius: 10px;
	padding: 40px 15px;
	width: 500px;
}

.ui-widget-content {
	border: 1px solid #bdc3c7;
	background: #e1e1e1;
	color: #222222;
	margin-top: 4px;
}

.ui-slider .ui-slider-handle {
	position: absolute;
	z-index: 2;
	width: 5.2em;
	height: 2.2em;
	cursor: default;
	margin: 0 -40px auto !important;
	text-align: center;	
	line-height: 30px;
	color: #FFFFFF;
	font-size: 15px;
}

.ui-slider .ui-slider-handle .glyphicon {
	color: #FFFFFF;
	margin: 0 3px; 
	font-size: 11px;
	opacity: 0.5;
}

.ui-corner-all {
	border-radius: 20px;
}

.ui-slider-horizontal .ui-slider-handle {
	top: -.9em;
}

.ui-state-default,
.ui-widget-content .ui-state-default {
	border: 1px solid #f9f9f9;
	background: #3498db;
}

.ui-slider-horizontal .ui-slider-handle {
	margin-left: -0.5em;
}

.ui-slider .ui-slider-handle {
	cursor: pointer;
}

.ui-slider a,
.ui-slider a:focus {
	cursor: pointer;
	outline: none;
}

.price, .lead p {
	font-weight: 600;
	font-size: 32px;
	display: inline-block;
	line-height: 60px;
}

h4.great {
	background: #00ac98;
	margin: 0 0 25px -60px;
	padding: 7px 15px;
	color: #ffffff;
	font-size: 18px;
	font-weight: 600;
	border-radius: 5px;
	display: inline-block;
	-moz-box-shadow:    2px 4px 5px 0 #ccc;
  	-webkit-box-shadow: 2px 4px 5px 0 #ccc;
  	box-shadow:         2px 4px 5px 0 #ccc;
}

.total {
	border-bottom: 1px solid #7f8c8d;
	/*display: inline;
	padding: 10px 5px;*/
	position: relative;
	padding-bottom: 20px;
}

.total:before {
	content: "";
	display: inline;
	position: absolute;
	left: 0;
	bottom: 5px;
	width: 100%;
	height: 3px;
	background: #7f8c8d;
	opacity: 0.5;
}

.price-slider {
	margin-bottom: 70px;
}

.price-slider span {
	font-weight: 200;
	display: inline-block;
	color: #7f8c8d;
	font-size: 13px;
}

.form-pricing {
	background: #ffffff;
	padding: 20px;
	border-radius: 4px;
}

.price-form {
	background: #ffffff;
	margin-bottom: 10px;
	padding: 20px;
	border: 1px solid #eeeeee;
	border-radius: 4px;
	/*-moz-box-shadow:    0 5px 5px 0 #ccc;
  	-webkit-box-shadow: 0 5px 5px 0 #ccc;
  	box-shadow:         0 5px 5px 0 #ccc;*/
}

.form-group {
	margin-bottom: 0;
}

.form-group span.price {
	font-weight: 200;
	display: inline-block;
	color: #7f8c8d;
	font-size: 14px;
}

.help-text {
	display: block;
	margin-top: 32px;
	margin-bottom: 10px;
	color: #737373;
	position: absolute;
	/*margin-left: 20px;*/
	font-weight: 200;
	text-align: right;
	width: 188px;
}

.price-form label {
	font-weight: 200;
	font-size: 21px;
}

img.payment {
	display: block;
    margin-left: auto;
    margin-right: auto
}

.ui-slider-range-min {
	background: #2980b9;
}

/* HR */

hr.style {
	margin-top: 0;
    border: 0;
    border-bottom: 1px dashed #ccc;
    background: #999;
}
.custom-handle-red {
    width: 5em !important;
    height: 5.2em !important;
    top: -30px !important;
    margin-top: -.8em !important;
    text-align: center !important;
    line-height: 1.6em !important;
    font-size: 18px !important;
    font-weight: bold !important;
    background-color: red !important;
    color: white !important;
}
.custom-handle-yellow {
    width: 5em !important;
    height: 5.2em !important;
    top: -30px !important;
    margin-top: -.8em !important;
    text-align: center !important;
    line-height: 1.6em !important;
    font-size: 18px !important;
    font-weight: bold !important;
    background-color: #f7c725 !important;
    color: white !important;
}
.custom-handle-green {
    width: 5em !important;
    height: 5.2em !important;
    top: -30px !important;
    margin-top: -.8em !important;
    text-align: center !important;
    line-height: 1.6em !important;
    font-size: 18px !important;
    font-weight: bold !important;
    background-color: green !important;
    color: white !important;
}
.custom-handle-blue {
    width: 5em !important;
    height: 5.2em !important;
    top: -30px !important;
    margin-top: -.8em !important;
    text-align: center !important;
    line-height: 1.6em !important;
    font-size: 18px !important;
    font-weight: bold !important;
    background-color: blue !important;
    color: white !important;
}
.image_project {
      padding-top:5%;
      height:250px !important;
    }
.small_head {
        font-weight: bold;
        font-size:18px;
    }

   

       </style>
    </xpath>
</template>

<template id="project_main_page" inherit_id="portal.frontend_layout">
<xpath expr="//div[@id='wrapwrap']/header" position="replace">
	<header>
	
	<div class="row right_gap_header">
		<div class="col-xs-12 head_fit">
			<div class="col-xs-12 col-md-4 head_left"><a href="/"><span class="text_head">Projects</span></a></div>
			<div class="col-xs-12 col-md-1 head_right" style="padding-top: 12px;"><a href="/my/home/projectsboard"><span class="text_head">Projects board</span></a></div>
			<div class="col-xs-12 col-md-1  head_right" style="padding-top: 12px;"><a href="/my/home"><span class="text_head">My investment</span></a></div>
			<t t-if="user_id.partner_id.project">
			<div class="col-xs-12 col-md-1  head_right" style="padding-top: 12px;"><a href="http://projects.darfchain.com/web#menu_id=87&#38;action="><span class="text_head">My projects</span></a></div>
			</t>
			<div class="col-xs-12 col-md-2  head_right" style="padding-top: 12px;"><a href="/my/home/transactions"><span class="text_head">Transaction history</span></a></div>
			<div class="col-xs-12 col-md-1  head_right" style="padding-top: 12px;"><a href="/my/home/setting"><span class="text_head">Setting</span></a></div>
			<div class="col-xs-12 col-md-2  head_right">
			<t t-if="not user_id._is_public()">
				<span class="dropdown">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#">
						<span class="text_head"
							t-esc="user_id.name[:23] + '...' if user_id.name and len(user_id.name) &gt; 25 else user_id.name" />
						<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li>
							<a t-attf-href="/my/home" role="menuitem">My Account</a>
						</li>
						<li id="o_logout">
							<a t-attf-href="/web/session/logout?redirect=/" role="menuitem">Logout</a>
						</li>
					</ul>
				</span>
				</t>
				<t t-if="user_id._is_public()">
					<a t-attf-href="/web/login" role="menuitem">Login</a>
					<style>
					body {padding-top:0px;}
					</style>
				</t>
				<img t-att-src="website.image_url(user_id,'image')"
					class="img-circle image_right" alt="Roman" />
			</div>
		</div>
	</div>
</header>
</xpath>
<xpath expr="//div[@id='footer']" position="replace">
	<div class="row">
		<div class="col-xs-12 text-center foot_fit">
			<div class="col-xs-12 col-md-4">
				<p>Projects</p>
				<p>Blockchain system for investment</p>
			</div>
			<div class="col-xs-12 col-md-4">
				Our site:
				<a src="http://darfchain.com">Darfchain</a>
			</div>
			<div class="col-xs-12 col-md-4">
				<a src="http://darfchain.com">By Darfchain ICO</a>
			</div>
		</div>
	</div>
</xpath>

</template>
<template id="project_portal" inherit_id="portal.portal_my_home"
	name="My Projects">
	<xpath expr="//div[hasclass('o_portal_my_home')]" position="replace">
	<!-- <xpath expr="//div[hasclass('col-lg-8')]" position="replace"> -->
		<ul class="o_portal_docs list-group" style="display:none;">
		</ul>
		<div class="row meetuplist">
			<div class="col-xs-12 meetup_list_header">
				<p>Your investments</p>
			</div>
			<div class="col-xs-12 head_meetup_list">
			<div class="col-xs-4">Name</div>
			<div class="col-xs-2">Token of project</div>
			<div class="col-xs-2">Amount projects tokens</div>
			<div class="col-xs-2">My token amount</div>
			</div>
			<t t-if="projects != []">
			<t t-foreach="projects" t-as="val">
			<t t-if="val['publish_on_web'] == True">
			<div class="col-xs-12">
				    <div class="col-xs-4">
				    <t t-set="id" t-value="val['id']" />
				     <a  t-attf-href="/my/home/project/{{id}}">
						<span>
							<t t-esc="val['project_name']" />
						</span>
					</a>
					</div>
					<div class="col-xs-2">
						<span>
							<t t-esc="val['project_token_name']" />
						</span>
					</div>
					<div class="col-xs-2">
						<span>
							<t t-esc="val['token_amount']" />
						</span>
					</div>
					<div class="col-xs-4">
						<span>
							<t t-esc="val['project_token_amount']" />
						</span>
					</div>
		    </div>
			</t>
			</t>
			</t>
			<t t-if="projects == []">
			<div class="col-xs-12"><p>Today you don't have investments!</p></div>
			</t>
		</div>
	</xpath>
</template>
<template id="voting_portal_main" inherit_id="portal.portal_layout" name="Voting Portal" >
<xpath expr="//div[hasclass('container')]"  position="replace">
<div class="container mt16 o_portal" style="display:none;">
                <div class="oe_structure">
                    <div t-if="not no_breadcrumbs" class="row">
                        <div class="col-sm-12">
                            <ol class="breadcrumb o_portal_submenu">
                                <li><a href="/my/home"><i class="fa fa-home"/></a></li>
                                <li t-if="page_name == 'my_details'">Your Details</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
</xpath>
<xpath expr="//div[@id='wrap']" position="replace">
<div id="wrap" class="o_portal_wrap">
                <div>
                    <t t-if="my_details">
                        <div class="row">
                            <div t-attf-class="col-md-12 col-lg-12">
                                <t t-raw="0"/>
                            </div>
                            <div id="o_my_sidebar" class="col-md-3 col-lg-offset-1 o_my_sidebar" style="display:none;">
                                <div class="o_my_contact" t-if="sales_user">
                                    <t t-call="portal.portal_contact"/>
                                </div>
                                <div class="o_portal_my_details">
                                    <h3 class="page-header">Your Details <a href="/my/account" class="btn btn-default btn-xs">Change</a></h3>
                                    <div t-field="user_id.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;email&quot;, &quot;phone&quot;, &quot;address&quot;, &quot;name&quot;]}"/>
                                </div>
                                <div class="o_my_archives" t-if="archive_groups">
                                    <t t-call="portal.portal_archive_groups"/>
                                </div>
                            </div>
                        </div>
                    </t>
                    <t t-else="">
                        <t t-raw="0"/>
                    </t>
                </div>
            </div>
           
</xpath>
</template>
<template id="project_page" name="Project Page">
<t t-call="portal.portal_layout" >
	<div class="page_style" style="padding-left: 40px; padding-top: 40px; padding-left: 40px">
	<div class="row">
		<div class="col-xs-12"> 
		<div class="text-right col-xs-3">Project name:</div> 
		<div class="text-left col-xs-9"><span t-field="project.name"/></div> 
		</div>
	</div>
		<div class="row meetuplist"> 
		<ul class="nav nav-tabs">
		  <li class="active"><a data-toggle="tab" href="#market">Market</a></li>
		  <li><a data-toggle="tab" href="#technology">Technology</a></li>
		  <li><a data-toggle="tab" href="#team">Team</a></li>
		  <li><a data-toggle="tab" href="#finance">Finance</a></li>
		  <li><a data-toggle="tab" href="#legal_issues">Legal issues</a></li>
		</ul>
			<div class="tab-content">
				<div id="market" class="tab-pane fade in active">
				  <h3>MARKET</h3>
				  <t t-set="market_html" t-value="project.market" />
				  <div id="market_id">
				  </div>
				  <script>
					  var market_div = document.getElementById("market_id");
	                  market_div.innerHTML = "<t t-esc="project.market" />;
				  </script>
				  
				</div>
				<div id="technology" class="tab-pane fade">
				  <h3>TECHNOLOGY</h3>
				   <p><span t-field="project.technology"/></p> </div> 
				<div id="team" class="tab-pane fade"> 
				<h3>Team</h3> 
				<t t-foreach="project.project_team" t-as="team_mamber">
				<p><span t-field="team_mamber.team_mamber.name"/></p>
				</t>
				</div>
				<div id="finance" class="tab-pane fade">
				  <h3>FINANCE</h3>
				  <p>Financial information</p>
				  <div class="col-xs-12 text-center">
					<div class="text-right col-xs-3">Projects token name:</div>
					<div class="text-left col-xs-9"><span t-field="project.project_token_name"/></div>
					<div class="text-right col-xs-3">Projects token amount:</div>
					<div class="text-left col-xs-9"><span t-field="project.token_amount"/></div>
					<div class="text-right col-xs-3">Exchange rate:</div>
					<div class="text-left col-xs-9"><span t-field="project.exchange_rate"/></div>
					<div class="text-right col-xs-3">Token's price:</div>
					<div class="text-left col-xs-9"><span t-field="project.tokens_price"/></div>
				  </div>
				  </div>
				<div id="legal_issues" class="tab-pane fade">
				  <h3>Legal Issues</h3>
				  <p>
					<span t-field="project.term_and_condition" />
				  </p>
				</div>
			  </div>
			</div>
		</div>
	
</t>
</template>
<template id="projects_board" name="Project Board Page">
	<t t-call="portal.portal_layout" >
	<div class="page_style">
				<div>
<div class="container">
						<div class="row">                   
							<t t-foreach="projects" t-as="project" >
							<t t-if="project['publish_on_web'] == True">
								<div class="col-md-4">
									<t t-set="id" t-value="project['project'].id" />
									<t t-set="name" t-value="project['project'].name" />
									<h3><span><t t-esc="name"/></span></h3>
									<div  class="thumbnail">
									<a  t-attf-href="/my/home/invest/{{id}}">
									<img class="img-fluid rounded mb-3 mb-md-0 image_project" t-att-src="website.image_url(project['project'],'image')" />
									</a>
									</div>
									<div class="caption">
										<div class="row">
										<div class="col-md-6">
										   <a class="btn btn-danger" t-attf-href="/my/home/invest/{{id}}">INVEST</a>
										</div>
										<div class="col-md-6">
										   <a t-attf-href="/my/home/project/{{id}}">READ MORE...</a>
										</div>
										</div>
										<p>
										<span class="small_head">Description: </span><span><t t-esc="project['project'].description" /></span><br/> 
										<span class="small_head">Token: </span><span><t t-esc="project['project'].project_token_name" /></span><br/>
										<span class="small_head">Token amount: </span><span><t t-esc="project['project'].token_amount" /></span><br/> 
										<span class="small_head">Your tokens: </span><span><t t-esc="project['project_token_amount']" /></span>
										</p>
									</div>
								</div>
						   </t>					
						   </t>
					</div>
				</div>
				</div>
			</div>
	</t>
</template>
<template id="project_invest" name="Project Invest Page">
	<t t-call="portal.portal_layout" >
	<div class="page_style">
	<script>
	    $(document).ready(function(value) {
		odoo.define('darfproject.page_condition', function (require) {
				"use strict";
				var ajax = require('web.ajax');
				
				$("#buy_condition").click(function () {
					 var project_id = $("#project_id").val();
					 var token_value = $("#token_value").val();
					 console.log(token_value);
					 console.log(location.host);
					 var redirect = 'http://'+location.host + '/my/home/condition/'+project_id+'/'+token_value;
					 ajax.jsonRpc("/web/condition", 'call', { 
					                                      'project_id':project_id,
					                                      'token_value':token_value,
														   });
					 console.log(redirect);
	                // window.location.replace(redirect);
	                window.location.href = redirect;
				 
				 });
		});
				 
		});
    </script>
	<div class="row">
	<div class="col-xs-12 text-center" style="padding-top:30px;"><img t-att-src="website.image_url(project,'image')"
					class="img-circle image_right" alt="Roman" /></div>
	<form>
		<div class="col-xs-12" style="margin-top: 30px;">
		<div class="col-xs-6 text-right">To buying tokens of project send ether to this address</div>
		<div class="col-xs-6 text-left"><span t-field="project.project_address"/></div>
		</div>
			<div class="col-xs-12 text-center" style="padding-top:30px;"><span t-field="project.name"/></div>
			<div class="col-xs-12 text-center" style="padding-top:30px;">Token name: <span t-field="project.project_token_name"/></div>
			<div class="col-xs-12 text-center" style="padding-top:30px;">All tokens: <span t-field="project.token_amount"/></div>
			<div class="col-xs-12" style="padding-top:30px;">
			<t t-set="id" t-value="project.id" />
			<input id="project_id" name="project" type="hidden" t-attf-value="{{id}}" />
			<div class="col-xs-6 text-right">How many tokens do you want to buy?</div>
			<div class="col-xs-6 text-left"><input name="tokens" id="token_value" type="text" value="0" style="width:100px;"/></div>
 			<div class="col-xs-12 text-center" style="padding-top:20px;padding-bottom:50px;">
            <!-- <input type="submit" value="buy"/> -->
            <button type="button" class="btn btn-default" id="buy_condition" data-dismiss="modal">Next</button>
 			</div>
			</div>
	</form>
	</div>
	</div>
	</t>
</template>
<template id="customer_setting" name="Customer Setting">
	<t t-call="portal.portal_layout" >
	<div class="page_style">
	<div class="row">
	<form action="/my/home/customer">
	<div class="col-xs-12" style="margin-top:30px;">
<div class="col-xs-6 text-right">Ethereum address</div>
	<div class="col-xs-6 text-left"><input name="Ethereum address" type="text" style="width:300px;"/></div>
	<div class="col-xs-6 text-right">Bitcoin address</div>
	<div class="col-xs-6 text-left"><input name="Bitcoin address" type="text" style="width:300px;"/></div>
	<div class="col-xs-6 text-right"><input type="submit" value="Save"/></div>
	</div>
	</form>
	</div>
	</div>
	</t>
</template>
<template id="term_and_condition" name="Term Condition">
	<t t-call="portal.portal_layout" >
	<div class="page_style">
	<script>
	$(document).ready(function(value) {
		odoo.define('darfproject.token_buy', function (require) {
				"use strict";
				var ajax = require('web.ajax');
				
				$("#buy_tokens").click(function () {
					 var project_id = $("#project_id").val();
					 var accept = $("#accept").val();
					 var token_value = $("#token_value").val();
					 console.log(accept);
					 console.log(location.host);
					 var redirect = 'http://'+location.host + '/my/home';
					 ajax.jsonRpc("/web/buytoken", 'call', { 
					                                      'project_id':project_id,
					                                      'accept':accept,
					                                      'token_value':token_value,
														   });
					 console.log(redirect);
	                // window.location.replace(redirect);
	                window.location.href = redirect;
				 
					 });
				 
			 });
	   });
	 </script>
		<div class="row">
			<div class="col-xs-12 text-center" style="padding-top:50px;">
				<p>
				<span t-field="project.term_and_condition" />
				</p>
			</div>
			<div class="col-xs-12 text-center" >
			<p><span t-esc="token_value"/></p>
			
			</div>
		</div>
		<div class="col-xs-12 text-center">
			<form>
			<input id="project_id" name="project" type="hidden" t-attf-value="{{project.id}}" />
			<input id="token_value" name="tokens" type="hidden" t-attf-value="{{token_value}}" />
			<input id="accept" type="checkbox" name="accept" value="accept"/> Accept<br/>
            <button type="button" class="btn btn-default" id="buy_tokens" data-dismiss="modal">BUY</button>
			</form>
		</div>
	</div>
	</t>
</template>
</odoo>